(()=>{var t={};const e=document.createElement("div"),o=document.createElement("video");o.muted=!0,o.autoplay=!0,o.src=window.innerHeight>window.innerWidth?"./m.mp4":"./b.mp4",o.controls=!0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.opacity=.1,o.loop=!0;let n,l,i,s,d=!0;const a=[[1,2,3],[4,0,5],[7,8,6]],r=function(){var t=document.createElement("div");return t.style.width=i-2+"px",t.style.height=s-2+"px",t.style.border="1px solid #3e3e3e",t.style.margin="1px",t.style.overflow="hidden",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.cursor="pointer",t.style.position="absolute",t.style.transition="top 0.2s linear 0s , left 0.2s linear 0s",t},c=function(){if(d){var t=parseInt(this.dataset.row),e=parseInt(this.dataset.col);t>0&&0===a[t-1][e]?h(t,e,t-1,e):t<2&&0===a[t+1][e]?h(t,e,t+1,e):e>0&&0===a[t][e-1]?h(t,e,t,e-1):e<2&&0===a[t][e+1]&&h(t,e,t,e+1),p()?document.getElementById("msg").innerHTML="恭喜你，拼图成功！":document.getElementById("msg").innerHTML=""}},h=function(t,e,o,n){var l=a[t][e];a[t][e]=a[o][n],a[o][n]=l,y(t,e,o,n)},y=function(t,o,n,l){d=!1;const i=e.querySelectorAll("div"),s=i[3*t+(o+1)-1],a=i[3*n+(l+1)-1],r=s.style.left,c=s.style.top;start_dataset_row=s.dataset.row,start_dataset_col=s.dataset.col,s.style.left=a.style.left,s.style.top=a.style.top,s.dataset.row=a.dataset.row,s.dataset.col=a.dataset.col,a.style.left=r,a.style.top=c,a.dataset.row=start_dataset_row,a.dataset.col=start_dataset_col,setTimeout((()=>{u(s,a),d=!0}),200)},u=function(t,e){const o=t.parentNode,n=t.nextSibling===e?t:t.nextSibling;e.parentNode.insertBefore(t,e),o.insertBefore(e,n)},p=function(){for(var t=1,e=0;e<3;e++)for(var o=0;o<3;o++){if(t!==(0===a[e][o]?9:a[e][o]))return!1;t++}return!0};o.addEventListener("loadeddata",(function(){console.log("video loaded"),console.log(o.videoWidth,o.videoHeight),console.log("client",document.body.clientWidth,document.body.clientHeight),l=.75*document.body.clientHeight,n=l/o.videoHeight*o.videoWidth,i=Math.floor(n/3),s=Math.floor(l/3),o.width=n,o.height=l,e.style.width=n+"px",e.style.height=l+"px",e.style.position="relative";const t=document.createElement("canvas");e.appendChild(o),document.body.appendChild(e),ctx=t.getContext("2d"),t.width=o.width,t.height=o.height;const d=function(t,e){const o=[];for(let t=0;t<9;t++){const t=document.createElement("canvas");t.width=i,t.style.width=i+"px",t.height=s,t.style.height=s+"px",o.push(t)}return o}();f(d),setInterval((()=>{ctx.drawImage(o,0,0,t.width,t.height),function(t,e,o,n){let l=0;for(let o=0;o<3;o++)for(let n=0;n<3;n++){const i=e[l],s=i.getContext("2d"),d=i.width,a=i.height;s.drawImage(t,n*d,o*a,d,a,0,0,d,a),l++}}(t,d)}),40)}));const f=function(t){for(var o=0;o<3;o++)for(var n=0;n<3;n++){var l=a[o][n],d=r();d.style.top=o*s+"px",d.style.left=n*i+"px",d.dataset.row=o.toString(),d.dataset.col=n.toString(),d.dataset.val=l.toString(),d.addEventListener("click",c),0!=l&&d.appendChild(t[l-1]),e.appendChild(d)}};function m(t){o.muted=!1,o.volume=.1;const n=e.querySelectorAll("div");setTimeout((()=>{const e=Math.floor(Math.random()*n.length);n[e].click(),--t>0&&m(t)}),0)}window.addEventListener("resize",(()=>{location.reload()})),document.getElementById("btn").addEventListener("click",(()=>m(100)));var g=window;for(var v in t)g[v]=t[v];t.__esModule&&Object.defineProperty(g,"__esModule",{value:!0})})();